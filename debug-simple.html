<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Simple JS Module Test</title>
		<style>
			body {
				font-family: Arial, sans-serif;
				margin: 0;
				padding: 20px;
				background: linear-gradient(
					135deg,
					#6b2fbc 0%,
					#9d50e8 50%,
					#4f46e5 100%
				);
				color: white;
				min-height: 100vh;
			}
			.test-result {
				margin: 10px 0;
				padding: 10px;
				border-radius: 5px;
				background: rgba(255, 255, 255, 0.1);
			}
		</style>
	</head>
	<body>
		<h1>üß™ JavaScript Module Loading Test</h1>
		<div id="results">
			<div class="test-result">‚è≥ Testing JavaScript execution...</div>
		</div>

		<script>
			// Test 1: Basic JavaScript
			console.log("‚úÖ Basic JavaScript working");
			document.getElementById("results").innerHTML +=
				'<div class="test-result">‚úÖ Basic JavaScript: Working</div>';

			// Test 2: ES6 features
			try {
				const arrow = () => "ES6 Arrow Functions";
				const [a, b] = [1, 2]; // Destructuring
				const template = `Template literals: ${arrow()}`;
				console.log("‚úÖ ES6 features working:", template);
				document.getElementById("results").innerHTML +=
					'<div class="test-result">‚úÖ ES6 Features: Working</div>';
			} catch (error) {
				console.error("‚ùå ES6 features failed:", error);
				document.getElementById("results").innerHTML +=
					'<div class="test-result">‚ùå ES6 Features: Failed - ' +
					error.message +
					"</div>";
			}

			// Test 3: Dynamic import (what Vite uses)
			async function testDynamicImport() {
				try {
					// Test dynamic import with a simple module
					const module = await import(
						'data:text/javascript,export default "Hello from dynamic import"'
					);
					console.log("‚úÖ Dynamic imports working:", module.default);
					document.getElementById("results").innerHTML +=
						'<div class="test-result">‚úÖ Dynamic Imports: Working</div>';
				} catch (error) {
					console.error("‚ùå Dynamic imports failed:", error);
					document.getElementById("results").innerHTML +=
						'<div class="test-result">‚ùå Dynamic Imports: Failed - ' +
						error.message +
						"</div>";
				}
			}

			// Test 4: Module syntax
			const testScript = document.createElement("script");
			testScript.type = "module";
			testScript.textContent = `
				try {
					import.meta.env; // This should work in module context
					console.log('‚úÖ ES modules working');
					document.getElementById('results').innerHTML += '<div class="test-result">‚úÖ ES Modules: Working</div>';
				} catch (error) {
					console.error('‚ùå ES modules failed:', error);
					document.getElementById('results').innerHTML += '<div class="test-result">‚ùå ES Modules: Failed - ' + error.message + '</div>';
				}
			`;

			testScript.onerror = (error) => {
				console.error("‚ùå Module script failed to load:", error);
				document.getElementById("results").innerHTML +=
					'<div class="test-result">‚ùå Module Script: Failed to load</div>';
			};

			document.head.appendChild(testScript);

			// Test 5: Fetch API (used by Vite)
			fetch("/logo_transparent.png", { method: "HEAD" })
				.then((response) => {
					if (response.ok) {
						console.log("‚úÖ Fetch API working");
						document.getElementById("results").innerHTML +=
							'<div class="test-result">‚úÖ Fetch API: Working</div>';
					} else {
						console.warn("‚ö†Ô∏è Fetch API working but asset not found");
						document.getElementById("results").innerHTML +=
							'<div class="test-result">‚ö†Ô∏è Fetch API: Working (asset not found)</div>';
					}
				})
				.catch((error) => {
					console.error("‚ùå Fetch API failed:", error);
					document.getElementById("results").innerHTML +=
						'<div class="test-result">‚ùå Fetch API: Failed - ' +
						error.message +
						"</div>";
				});

			// Run dynamic import test
			testDynamicImport();

			// Test 6: Check if we can access the built files
			setTimeout(() => {
				fetch("/assets/", { method: "HEAD" })
					.then((response) => {
						document.getElementById("results").innerHTML +=
							'<div class="test-result">Assets directory: ' +
							(response.ok ? "‚úÖ Accessible" : "‚ùå Not found") +
							"</div>";
					})
					.catch((error) => {
						document.getElementById("results").innerHTML +=
							'<div class="test-result">‚ùå Assets directory: Error - ' +
							error.message +
							"</div>";
					});
			}, 1000);
		</script>
	</body>
</html>
